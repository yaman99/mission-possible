<div class="overflow-auto pb-5" *ngIf="accountCreated | async">
  <div
    class="notice d-flex bg-light-success rounded border-success border border-dashed min-w-lg-300px flex-shrink-0 p-6"
  >
    <span class="svg-icon svg-icon-2tx svg-icon-success me-4">
      <i class="fas fa-envelope text-success"></i>
    </span>
    <div class="d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap">
      <div class="mb-3 mb-md-0 fw-semibold">
        <h4 class="text-gray-900 fw-bold">تم إنشاء الحساب</h4>
        <div class="fs-6 text-gray-700 pe-7">
          تم إرسال إيميل للتحقق على البريد الإلكتروني الخاص بك
        </div>
      </div>
    </div>
  </div>
</div>
<form
  class="form w-100 fv-plugins-bootstrap5 fv-plugins-framework"
  novalidate="novalidate"
  id="kt_login_signup_form"
  [formGroup]="registrationForm"
  (ngSubmit)="submit()"
>
  <div class="mb-10 text-center">
    <h1 class="text-dark mb-3">{{ 'AUTH.SIGNUP.TITLE' | translate }}</h1>
    <div class="text-gray-400 fw-bold fs-4">
      {{ 'AUTH.SIGNUP.HAVE_ACCOUNT_QA' | translate }}
      <a routerLink="/auth/login" class="link-primary fw-bolder" [style.margin-left]="'5px'">{{
        'AUTH.SIGNUP.SIGNIN' | translate
      }}</a>
    </div>
  </div>

  <!-- <ng-container *ngIf="hasError">
    <div class="mb-lg-15 alert alert-danger">
      <div class="alert-text font-weight-bold">The registration details are incorrect</div>
    </div>
  </ng-container> -->

  <div class="mb-1">
    <div class="row">
      <label class="form-label text-dark fs-6">إنشاء حساب كـ :</label>
      <div class="col-lg-6">
        <input
          type="radio"
          class="btn-check"
          name="userType"
          formControlName="userType"
          value="advertiser"
          id="kt_create_account_form_account_type_advertiser"
        />
        <label
          class="btn btn-outline btn-outline-dashed btn-outline-default p-7 d-flex align-items-center"
          for="kt_create_account_form_account_type_advertiser"
        >
          <span
            class="svg-icon svg-icon-3x me-5"
            [inlineSVG]="'./assets/media/icons/duotune/arrows/arr079.svg'"
          >
          </span>

          <span class="d-block fw-bold text-start">
            <span class="text-dark fw-bolder d-block fs-4 mb-2">{{
              'GENERAL.WORDS.ADVERTISER' | translate
            }}</span>
            <span class="text-muted fw-bold fs-6">تحقيق إنتشار واسع</span>
          </span>
        </label>
      </div>
      <div class="col-lg-6">
        <input
          type="radio"
          class="btn-check"
          name="userType"
          formControlName="userType"
          value="promoter"
          id="kt_create_account_form_account_type_promoter"
        />
        <label
          class="btn btn-outline btn-outline-dashed btn-outline-default p-7 d-flex align-items-center"
          for="kt_create_account_form_account_type_promoter"
        >
          <span class="d-block fw-bold text-start">
            <span class="text-dark fw-bolder d-block fs-4 mb-2">{{
              'GENERAL.WORDS.PROMOTER' | translate
            }}</span>
            <span class="text-muted fw-bold fs-6">تسويق منتجات العملاء</span>
          </span>
        </label>
      </div>
    </div>
  </div>
  <div class="mb-1">
    <div class="row">
      <div class="col-lg-6">
        <label class="form-label text-dark fs-6">{{ 'AUTH.INPUT.FIRSTNAME' | translate }}</label>
        <input
          class="form-control form-control-lg form-control-solid"
          type="text"
          name="firstName"
          formControlName="firstName"
          autocomplete="off"
          [ngClass]="{
            'is-invalid':
              registrationForm.controls['firstName'].invalid &&
              (registrationForm.controls['firstName'].dirty ||
                registrationForm.controls['firstName'].touched),
            'is-valid': registrationForm.controls['firstName'].valid
          }"
        />
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'required',
            message: 'Fullname is required',
            control: registrationForm.controls['firstName']
          }"
        ></ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'minlength',
            message: 'Fullname should have at least 3 symbols',
            control: registrationForm.controls['firstName']
          }"
        ></ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'maxLength',
            message: 'Fullname should have maximum 100 symbols',
            control: registrationForm.controls['firstName']
          }"
        ></ng-container>
      </div>
      <div class="col-lg-6">
        <label class="form-label text-dark fs-6">{{ 'AUTH.INPUT.LASTNAME' | translate }}</label>
        <input
          class="form-control form-control-lg form-control-solid"
          type="text"
          name="lastName"
          formControlName="lastName"
          autocomplete="off"
          [ngClass]="{
            'is-invalid':
              registrationForm.controls['lastName'].invalid &&
              (registrationForm.controls['lastName'].dirty ||
                registrationForm.controls['lastName'].touched),
            'is-valid': registrationForm.controls['lastName'].valid
          }"
        />
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'required',
            message: 'Fullname is required',
            control: registrationForm.controls['lastName']
          }"
        ></ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'minlength',
            message: 'Fullname should have at least 3 symbols',
            control: registrationForm.controls['lastName']
          }"
        ></ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'maxLength',
            message: 'Fullname should have maximum 100 symbols',
            control: registrationForm.controls['lastName']
          }"
        ></ng-container>
      </div>
    </div>
  </div>

  <div class="fv-row mb-7">
    <label class="form-label text-dark fs-6">{{ 'AUTH.INPUT.EMAIL' | translate }}</label>
    <input
      class="form-control form-control-lg form-control-solid"
      type="email"
      name="email"
      formControlName="email"
      autocomplete="off"
      [ngClass]="{
        'is-invalid':
          registrationForm.controls['email'].invalid &&
          (registrationForm.controls['email'].dirty || registrationForm.controls['email'].touched),
        'is-valid': registrationForm.controls['email'].valid
      }"
    />
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'required',
        message: 'Email is required',
        control: registrationForm.controls['email']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'email',
        message: 'Email is invalid',
        control: registrationForm.controls['email']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'minlength',
        message: 'Email should have at least 3 symbols',
        control: registrationForm.controls['email']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'maxLength',
        message: 'Email should have maximum 360 symbols',
        control: registrationForm.controls['email']
      }"
    ></ng-container>
  </div>

  <div class="mb-10 fv-row">
    <label class="form-label text-dark fs-6">{{ 'AUTH.INPUT.PASSWORD' | translate }}</label>
    <input
      class="form-control form-control-lg form-control-solid"
      type="password"
      name="password"
      formControlName="password"
      autocomplete="off"
      [ngClass]="{
        'is-invalid':
          registrationForm.controls['password'].invalid &&
          (registrationForm.controls['password'].dirty ||
            registrationForm.controls['password'].touched),
        'is-valid': registrationForm.controls['password'].valid
      }"
    />
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'required',
        message: 'Password is required',
        control: registrationForm.controls['password']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'minlength',
        message: 'Password should have at least 3 symbols',
        control: registrationForm.controls['password']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'maxLength',
        message: 'Password should have maximum 100 symbols',
        control: registrationForm.controls['password']
      }"
    ></ng-container>
  </div>

  <div class="fv-row mb-5">
    <label class="form-label text-dark fs-6">{{ 'AUTH.INPUT.CONFIRM_PASSWORD' | translate }}</label>
    <input
      class="form-control form-control-lg form-control-solid"
      type="password"
      name="cPassword"
      autocomplete="off"
      formControlName="cPassword"
      [ngClass]="{
        'is-invalid':
          registrationForm.controls['cPassword'].invalid &&
          (registrationForm.controls['cPassword'].dirty ||
            registrationForm.controls['cPassword'].touched),
        'is-valid': registrationForm.controls['cPassword'].valid
      }"
    />
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'required',
        message: 'Confirm Password is required',
        control: registrationForm.controls['cPassword']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'minlength',
        message: 'Confirm Password should have at least 3 symbols',
        control: registrationForm.controls['cPassword']
      }"
    ></ng-container>
    <ng-container
      [ngTemplateOutlet]="formError"
      [ngTemplateOutletContext]="{
        validation: 'maxLength',
        message: 'Confirm Password should have maximum 100 symbols',
        control: registrationForm.controls['cPassword']
      }"
    ></ng-container>
    <ng-container
      *ngIf="
        registrationForm.controls['cPassword'].errors &&
        registrationForm.controls['cPassword'].errors.ConfirmPassword
      "
    >
      <div class="fv-plugins-message-container">
        <div class="fv-help-block">'Passsword' and 'Confirm Password' didn't match.</div>
      </div>
    </ng-container>
  </div>

  <div class="mb-10 text-center">
    <div class="text-gray-400 s-4">
      {{ 'AUTH.SIGNUP.PRIVACY_MSG' | translate }}
      <a href="https://indana.io" class="link-primary" [style.margin-left]="'5px'">{{
        'AUTH.SIGNUP.PRIVACY_LINK' | translate
      }}</a>
    </div>
  </div>

  <div class="text-center">
    <button
      type="submit"
      id="kt_sign_up_submit"
      [disabled]="registrationForm.invalid"
      class="btn btn-lg btn-primary w-100 mb-5"
    >
      <ng-container *ngIf="(isLoading$ | async) === false">
        <span class="indicator-label">{{ 'AUTH.BUTTON.CREATE_ACCOUNT' | translate }}</span>
      </ng-container>
      <ng-container *ngIf="isLoading$ | async">
        <span class="indicator-progress" [style.display]="'block'">
          {{ 'GENERAL.WORDS.PLEASE_WAIT' | translate }}
          <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
        </span>
      </ng-container>
    </button>
  </div>
</form>

<ng-template #formError let-control="control" let-message="message" let-validation="validation">
  <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
    <div class="fv-plugins-message-container">
      <div class="fv-help-block">
        <span role="alert">
          {{ message }}
        </span>
      </div>
    </div>
  </ng-container>
</ng-template>
